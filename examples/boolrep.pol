data Bool { T, F }

def Bool.not: Bool {
    T => F,
    F => T
}

data BoolRep(x: Bool) {
    TrueRep: BoolRep(T),
    FalseRep: BoolRep(F)
}

def BoolRep(x).extract(x: Bool): Bool {
    TrueRep => T,
    FalseRep => F
}

data Top { Unit }

def Top.flipRep(x: Bool, rep: BoolRep(x)): BoolRep(x.not) {
    Unit =>
        rep.match {
            TrueRep => FalseRep,
            FalseRep => TrueRep
        }
}

def Top.example: Bool { Unit => Unit.flipRep(T, TrueRep).extract(F) }
