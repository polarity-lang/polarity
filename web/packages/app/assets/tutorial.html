<!DOCTYPE html>
<html lang="en" data-theme="light">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Deriving Dependently-Typed OOP from First Principles</title>
</head>

<body>
  <script type="text/javascript">
    function jumpToHash(x) {
      const newHash = `#${x}`;
      const hasChanged = newHash !== location.hash;
      if (hasChanged) {
        location.hash = newHash;
      } else {
        window.dispatchEvent(new HashChangeEvent("hashchange"));
      }
    }
    function switchToDark() {
      document.documentElement.setAttribute('data-theme', 'dark');
    }
    function switchToLight() {
      document.documentElement.setAttribute('data-theme', 'light');
    }
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      switchToDark();
    }
  </script>
  <main class="container">
    <section>
      <h1>Deriving Dependently-Typed OOP from First Principles</h1>

      <p>This is the web demo accompanying the OOPSLA 2024 paper Deriving Dependently-Typed OOP from First Principles.
        You
        will find
        the most recent version of the language on <a
          href="https://polarity-lang.github.io">polarity-lang.github.io</a>.
      </p>

      <nav>
        <ul>
          <li>
            <details role="list">
              <summary aria-haspopup="listbox" role="button" class="secondary">Examples</summary>
              <ul role="listbox">
                {{#each examples}}
                <li><a onclick="jumpToHash('{{this}}.pol')">{{this}}</a></li>
                {{/each}}
              </ul>
            </details>
          </li>
          <li>
            <details role="list">
              <summary aria-haspopup="listbox" role="button" class="secondary">Theme</summary>
              <ul role="listbox">
                <li><a onclick="switchToLight()">Light</a></li>
                <li><a onclick="switchToDark()">Dark</a></li>
              </ul>
            </details>
          </li>
        </ul>
      </nav>
    </section>
    <!-- Editor -->
    <section>
      <div class="editor-container">
        <iframe class="editor-frame" id="editor-frame" src="./editor"></iframe>
      </div>
    </section>
    <!-- Tutorial -->
    <section id="tutorial">
      <h4>Tutorial</h4>
      <p>
        This is a short overview of the syntax of our language.
        Feel free to copy and paste sections of the tutorial code into the interactive editor above to try out the
        examples on your own.
      </p>

      <details>
        <summary><b>Data Types</b></summary>
        {{ data-types }}
      </details>

      <details>
        <summary><b>Codata Types</b></summary>
        {{ codata-types }}
      </details>

      <details>
        <summary><b>Definitions</b></summary>
        {{ definitions }}
      </details>

      <details>
        <summary><b>Codefinitions</b></summary>
        {{ codefinitions }}
      </details>

      <details>
        <summary><b>Comments</b></summary>
        {{ comments }}
      </details>

      <details>
        <summary><b>Typed Holes</b></summary>
        {{ typed-holes }}
      </details>
      <details>
        <summary><b>The Main Expression</b></summary>
        {{ main-expression }}
      </details>
    </section>
  </main>
</body>

</html>